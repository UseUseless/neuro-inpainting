services:
  watermark-remover:
    build: .
    image: watermark-remover:latest
    container_name: wm_remover

    # üî• –í–ö–õ–Æ–ß–ê–ï–ú –í–ò–î–ï–û–ö–ê–†–¢–£ (NVIDIA)
    # –ù–∞ Windows —Å WSL2 —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ —Å—Ç–æ—è—Ç –¥—Ä–∞–π–≤–µ—Ä—ã.
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: 1
              capabilities: [gpu]

    # –ú–æ–Ω—Ç–∏—Ä—É–µ–º –ø–∞–ø–∫–∏, —á—Ç–æ–±—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–ª—Å—è –Ω–∞ —Ç–≤–æ–µ–º –∫–æ–º–ø–µ,
    # –∞ –Ω–µ –∏—Å—á–µ–∑–∞–ª –≤–Ω—É—Ç—Ä–∏ –¥–æ–∫–µ—Ä–∞
    volumes:
      - .:/app
      - ./images_input:/app/images_input
      - ./images_cleaned:/app/images_cleaned
      - ./models:/app/models
      - ./backgrounds:/app/backgrounds
      - ./train_dataset:/app/train_dataset
      - ./runs:/app/runs
      - ./logs:/app/logs
      - ./bench_tests:/app/bench_tests

    # –ß—Ç–æ–±—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–ª—Å—è —Å—Ä–∞–∑—É
    command: tail -f /dev/null

    # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø–∞–º—è—Ç—å (–≤–∞–∂–Ω–æ –¥–ª—è PyTorch)
    shm_size: '8gb'